(self["webpackChunkproject_v2"]=self["webpackChunkproject_v2"]||[]).push([[7616],{94402:function(e,t,a){var s=a(35636);s.__esModule&&(s=s.default),"string"===typeof s&&(s=[[e.id,s,""]]),s.locals&&(e.exports=s.locals);var i=a(56).Z;i("4306a4fa",s,!0,{sourceMap:!1,shadowMode:!1})},98689:function(e,t,a){var s=a(8661);s.__esModule&&(s=s.default),"string"===typeof s&&(s=[[e.id,s,""]]),s.locals&&(e.exports=s.locals);var i=a(56).Z;i("34b4e078",s,!0,{sourceMap:!1,shadowMode:!1})},74130:function(e,t,a){var s=a(30934);s.__esModule&&(s=s.default),"string"===typeof s&&(s=[[e.id,s,""]]),s.locals&&(e.exports=s.locals);var i=a(56).Z;i("36683727",s,!0,{sourceMap:!1,shadowMode:!1})},9908:function(e,t,a){"use strict";a.d(t,{Z:function(){return u}});var s,i={uTabbar:a(58511).Z,uTabbarItem:a(95848).Z},n=function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("div",[a("u-tabbar",{attrs:{value:e.activeIndex,safeAreaInsetBottom:!0,border:!1,placeholder:!0}},e._l(e.list,(function(t){return a("u-tabbar-item",{key:t.path,attrs:{text:t.name,icon:t.icon},on:{click:function(a){arguments[0]=a=e.$handleEvent(a),e.clickTab(a,t)}}})})),1)],1)},l=[],o=(a(79288),{name:"customTabbar",props:{activeIndex:{type:Number,default:function(){return 0}},list:{type:Array,default:function(){return[{name:"首页",path:"/pages/index/index",icon:"home"},{name:"工作台",path:"/pages/workbench/index",icon:"grid"},{name:"我的",path:"/pages/my/index",icon:"account"}]}}},methods:{clickTab:function(e,t){this.$emit("tab-change",e,t),this.tabIndex=e,uni.reLaunch({url:t.path})}}}),r=o,c=a(69453),d=(0,c.Z)(r,n,l,!1,null,null,null,!1,i,s),u=d.exports},80551:function(e,t,a){"use strict";a.r(t),a.d(t,{default:function(){return h}});var s,i={mescrollBody:a(40398).Z},n=function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("v-uni-view",{staticClass:"messageCenter-page"},[a("v-uni-view",{staticClass:"content"},[a("v-uni-view",{staticClass:"scroll"},[a("mescroll-body",{ref:"mescrollRef",attrs:{top:"30"},on:{init:function(t){arguments[0]=t=e.$handleEvent(t),e.mescrollInit.apply(void 0,arguments)},down:function(t){arguments[0]=t=e.$handleEvent(t),e.downCallback.apply(void 0,arguments)},up:function(t){arguments[0]=t=e.$handleEvent(t),e.upCallback.apply(void 0,arguments)}}},[a("v-uni-view",{staticClass:"list"},[e._l(e.list,(function(t,s){return a("v-uni-view",{key:t.id,staticClass:"list-item",class:0==t.isRead?"":"disabled",on:{click:function(a){arguments[0]=a=e.$handleEvent(a),e.readMessage(t)}}},[a("v-uni-image",{attrs:{src:e.$base.staticUrl+"/image/msg-system.png",mode:"aspectFit"}}),a("v-uni-view",{staticClass:"list-system"},[a("p",[e._v(e._s(t.title))]),a("p",{staticClass:"two-line-ellipsis"},[e._v(e._s(t.content))]),a("p",[e._v(e._s(e._f("date")(t.createTime)))])])],1)}))],2)],1)],1)],1),a("customTabbar",{attrs:{activeIndex:e.bottomTabIndex}})],1)},l=[],o=a(41541),r=(a(48324),a(34338),a(79288),a(80843)),c=(a(4626),a(9908)),d=a(90761),u=a(81980)["Z"],f={name:"messageCenter",mixins:[d.Z],components:{customTabbar:c.Z},data:function(){return{bottomTabIndex:2,list:[]}},computed:(0,o.Z)((0,o.Z)({},(0,r.mapState)(["userInfo","studentInfo","appType"])),(0,r.mapGetters)(["selectedStudent","isLogin"])),onShow:function(){var e=this;this.getMessageRedCount(),this.$nextTick((function(){u.log("onShow mescroll",e.mescroll)}))},methods:(0,o.Z)((0,o.Z)({},(0,r.mapActions)(["getMessageRedCount"])),{},{readMessage:function(e){var t=this;0==e.isRead&&this.$api.message.readMessage({id:e.id,isRead:1}).then((function(e){t.getMessageRedCount(),t.mescroll.resetUpScroll(!1)})),uni.navigateTo({url:"/pages_common/pages/messageDetail?detail=".concat(JSON.stringify(e))})},downCallback:function(){this.mescroll.resetUpScroll()},upCallback:function(e){var t=this,a={pageNum:e.num,pageSize:e.size};1==this.appType&&(a.schoolId=this.selectedStudent.schoolId,a.studentId=this.selectedStudent.xsId),2==this.appType&&(a.schoolId=this.userInfo.organizationId,a.uid=this.userInfo.uid),this.$api.message.getMessageList(a).then((function(a){a.list||(a.list=[]),1==e.num?t.list=a.list:t.list=t.list.concat(a.list),t.mescroll.endBySize(a.list.length,Number(a.total))})).catch((function(){t.mescroll.endErr()}))}})},m=f,p=(a(94402),a(98689),a(69453)),g=(0,p.Z)(m,n,l,!1,null,"7cdaf33e",null,!1,i,s),h=g.exports},81871:function(e,t,a){"use strict";var s;a.d(t,{Z:function(){return f}});var i,n=function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("v-uni-view",{staticClass:"u-safe-bottom",class:[!e.isNvue&&"u-safe-area-inset-bottom"],style:[e.style]})},l=[],o={props:{}},r={name:"u-safe-bottom",mixins:[uni.$u.mpMixin,uni.$u.mixin,o],data:function(){return{safeAreaBottomHeight:0,isNvue:!1}},computed:{style:function(){var e={};return uni.$u.deepMerge(e,uni.$u.addStyle(this.customStyle))}},mounted:function(){}},c=r,d=(a(74130),a(69453)),u=(0,d.Z)(c,n,l,!1,null,"eca591a4",null,!1,s,i),f=u.exports},35636:function(e,t,a){"use strict";a.r(t);var s=a(8081),i=a.n(s),n=a(23645),l=a.n(n),o=l()(i());o.push([e.id,'@charset "UTF-8";/* uview 颜色变量 */',""]),t["default"]=o},8661:function(e,t,a){"use strict";a.r(t);var s=a(8081),i=a.n(s),n=a(23645),l=a.n(n),o=l()(i());o.push([e.id,'@charset "UTF-8";\n/* uview 颜色变量 */.messageCenter-page .content[data-v-7cdaf33e]{display:flex;flex-direction:column;align-items:center;width:%?750?%;background:#f5f7f8;border-radius:%?30?% %?30?% %?0?% %?0?%}.messageCenter-page .scroll .list-item[data-v-7cdaf33e]{position:relative;padding:%?30?%;display:flex;margin-top:%?30?%;width:%?688?%;background:#fff;box-shadow:%?0?% %?1?% %?25?% %?2?% rgba(18,42,105,.06);border-radius:%?16?%}.messageCenter-page .scroll .list-item.disabled[data-v-7cdaf33e]{-webkit-filter:grayscale(100%);-moz-filter:grayscale(100%);-ms-filter:grayscale(100%);-o-filter:grayscale(100%);filter:grayscale(100%);-webkit-filter:gray;filter:gray;filter:progid:DXImageTransform.Microsoft.BasicImage(grayscale=1)}.messageCenter-page .scroll .list-item.disabled p[data-v-7cdaf33e]{color:#bababa!important}.messageCenter-page .scroll .list-item[data-v-7cdaf33e]:nth-child(1){margin-top:%?10?%}.messageCenter-page .scroll .list-item uni-image[data-v-7cdaf33e]{width:%?87?%;height:%?86?%}.messageCenter-page .scroll .list-item .two-line-ellipsis[data-v-7cdaf33e]{width:%?520?%;word-break:break-all;text-overflow:ellipsis;display:-webkit-box;-webkit-box-orient:vertical;-webkit-line-clamp:2;\n  /* 这里是超出几行省略 */overflow:hidden}.messageCenter-page .scroll .list-item .list-desc[data-v-7cdaf33e]{margin-left:%?25?%;display:flex;flex-direction:column;justify-content:center}.messageCenter-page .scroll .list-item .list-desc > p[data-v-7cdaf33e]{font-size:%?28?%;font-weight:600;color:#404040}.messageCenter-page .scroll .list-item .list-desc .list-time[data-v-7cdaf33e]{margin-top:%?30?%;justify-content:space-between;display:flex}.messageCenter-page .scroll .list-item .list-desc .list-time p[data-v-7cdaf33e]:nth-child(1){font-size:%?22?%;color:#8c8c8c}.messageCenter-page .scroll .list-item .list-desc .list-time p[data-v-7cdaf33e]:nth-child(2){font-size:%?22?%;color:#8c8c8c}.messageCenter-page .scroll .list-item .source[data-v-7cdaf33e]{position:absolute;top:0;right:0;height:%?38?%;padding:0 %?18?%;background:#f6f7f9;border-radius:%?0?% %?16?% %?0?% %?20?%;font-size:%?22?%;color:#a6a6a6;text-align:center;line-height:%?38?%}.messageCenter-page .scroll .list-item .list-system[data-v-7cdaf33e]{margin-left:%?25?%;display:flex;flex-direction:column;justify-content:center}.messageCenter-page .scroll .list-item .list-system p[data-v-7cdaf33e]:nth-child(1){font-size:%?30?%;font-weight:600;color:#404040}.messageCenter-page .scroll .list-item .list-system p[data-v-7cdaf33e]:nth-child(2){margin:%?10?% 0;font-size:%?24?%;color:#505050}.messageCenter-page .scroll .list-item .list-system p[data-v-7cdaf33e]:nth-child(3){text-align:right;font-size:%?22?%;color:#8c8c8c}',""]),t["default"]=o},30934:function(e,t,a){"use strict";a.r(t);var s=a(8081),i=a.n(s),n=a(23645),l=a.n(n),o=l()(i());o.push([e.id,'@charset "UTF-8";\n/* uview 颜色变量 */.u-safe-bottom[data-v-eca591a4]{width:100%}',""]),t["default"]=o}}]);