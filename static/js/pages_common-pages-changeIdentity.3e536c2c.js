(self["webpackChunkproject_v2"]=self["webpackChunkproject_v2"]||[]).push([[3824],{22379:function(e,t,i){var n=i(11408);n.__esModule&&(n=n.default),"string"===typeof n&&(n=[[e.id,n,""]]),n.locals&&(e.exports=n.locals);var a=i(56).Z;a("9bdbc84a",n,!0,{sourceMap:!1,shadowMode:!1})},77938:function(e,t,i){var n=i(8130);n.__esModule&&(n=n.default),"string"===typeof n&&(n=[[e.id,n,""]]),n.locals&&(e.exports=n.locals);var a=i(56).Z;a("d0850f48",n,!0,{sourceMap:!1,shadowMode:!1})},59468:function(e,t,i){var n=i(7670);n.__esModule&&(n=n.default),"string"===typeof n&&(n=[[e.id,n,""]]),n.locals&&(e.exports=n.locals);var a=i(56).Z;a("7435d490",n,!0,{sourceMap:!1,shadowMode:!1})},71591:function(e,t,i){var n=i(91845);n.__esModule&&(n=n.default),"string"===typeof n&&(n=[[e.id,n,""]]),n.locals&&(e.exports=n.locals);var a=i(56).Z;a("19d4e4c1",n,!0,{sourceMap:!1,shadowMode:!1})},40190:function(e,t,i){"use strict";i.r(t),i.d(t,{default:function(){return g}});var n,a={uImage:i(20641).Z,uPopup:i(66202).Z,uCellGroup:i(65430).Z,uCell:i(76952).Z},r=function(){var e=this,t=e.$createElement,i=e._self._c||t;return i("v-uni-view",{staticClass:"bindStudent-page"},[i("v-uni-view",{staticClass:"content"},[i("div",{staticClass:"card"},[i("div",{staticClass:"card-head"},[i("v-uni-text",{staticClass:"card-title"},[e._v("选择身份")])],1),i("div",{staticClass:"card-content"},[e.rolesKeys.includes("manager")?i("v-uni-view",{staticClass:"item",on:{click:function(t){arguments[0]=t=e.$handleEvent(t),e.check(3)}}},[i("v-uni-view",{staticClass:"icon"},[i("u-image",{attrs:{width:"120rpx",height:"120rpx",src:e.base.staticUrl+"/image/admin-role.png"}})],1),i("v-uni-view",{staticClass:"name"},[e._v("管理员")])],1):e._e(),e.rolesKeys.includes("teacher")?i("v-uni-view",{staticClass:"item",on:{click:function(t){arguments[0]=t=e.$handleEvent(t),e.check(2)}}},[i("v-uni-view",{staticClass:"icon"},[i("u-image",{attrs:{width:"130rpx",height:"130rpx",src:e.base.staticUrl+"/image/teacher-role.png"}})],1),i("v-uni-view",{staticClass:"name"},[e._v("教师")])],1):e._e(),e.rolesKeys.includes("parent")?i("v-uni-view",{staticClass:"item",on:{click:function(t){arguments[0]=t=e.$handleEvent(t),e.check(1)}}},[i("v-uni-view",{staticClass:"icon"},[i("u-image",{attrs:{width:"130rpx",height:"130rpx",src:e.base.staticUrl+"/image/student-role.png"}})],1),i("v-uni-view",{staticClass:"name"},[e._v("家长")])],1):e._e()],1)])]),i("u-popup",{attrs:{round:10,mode:"bottom",show:e.showSel}},[i("v-uni-view",{staticClass:"pop-organ"},[i("v-uni-view",{staticClass:"title"},[e._v("请选择学校进行登录")]),i("u-cell-group",e._l(e.organList,(function(t,n){return i("v-uni-view",{key:n,staticClass:"organ_item"},[i("u-cell",{attrs:{isLink:!0,title:t.name},on:{click:function(i){arguments[0]=i=e.$handleEvent(i),e.selOrgan(t)}}})],1)})),1)],1)],1)],1)},o=[],s=i(41541),u=(i(50886),i(38077),i(60228),i(80843)),l=i(91012),d={computed:(0,s.Z)((0,s.Z)({},(0,u.mapState)(["userInfo"])),{},{roles:function(){return this.userInfo.roles||[]},rolesKeys:function(){return this.roles.map((function(e){return e.roleKey}))}}),data:function(){return{base:l.Z,showSel:!1,organList:[]}},methods:(0,s.Z)((0,s.Z)((0,s.Z)({},(0,u.mapMutations)(["setUserInfo","setAppType","setSchoolYear","setCourse","setStudentInfo"])),(0,u.mapActions)(["changeAppType","changeUserOrgan","getSchoolYearTermList"])),{},{getCurrentYear:function(e){var t=this;if(e)return this.$api.base.schoolYear(e).then((function(e){e?t.setSchoolYear(e):t.setSchoolYear({})}))},selOrgan:function(e){var t=this;this.$api.user.getUserInfo().then((function(i){var n=i.userOrganizations||[],a=n.filter((function(t){return"5"==t.organizationType&&t.organizationId==e.organizationId}));a&&a.length?t.$api.user.getTeacherID(i.uid).then((function(e){if(null==e)return t.showSel=!1,uni.$u.toast("查询不到教师信息，请联系管理员！");i["teacherId"]=e.jsid,t.setUserInfo((0,s.Z)((0,s.Z)({},i),a[0])),t.changeUserOrgan(),t.$api.base.getRkClasses(i.uid,{schoolId:a[0].organizationId}).then((function(e){e&&e.length&&t.setCourse(e)})).finally((function(){var e=t.roles.filter((function(e){return"teacher"==e.roleKey}))[0].roleId;t.changeAppType(e),t.setAppType(2),uni.reLaunch({url:"/pages/index/index"})}))})):uni.reLaunch({url:"/pages/index/index"})}))},check:function(e){var t=this;if(1==e){var i=this.roles.filter((function(e){return"parent"==e.roleKey}))[0].roleId;this.changeAppType(i),this.setAppType(1),this.getSchoolYearTermList(),this.getCurrentYear(this.userInfo.organizationId),this.$api.student.getStudents(this.userInfo.uid).then((function(e){t.setStudentInfo(e),uni.reLaunch({url:"/pages/index/index"})}))}if(2==e){var n=this.userInfo.userOrganizations||[],a=n.filter((function(e){return"5"==e.organizationType}));if(a&&a.length>0)if(1==a.length)this.setUserInfo((0,s.Z)((0,s.Z)({},this.userInfo),a[0])),this.$api.user.getTeacherID(this.userInfo.uid).then((function(e){if(null==e)return uni.$u.toast("查询不到教师信息，请联系管理员！");t.userInfo["teacherId"]=e.jsid,t.userInfo.userName=e.xm,t.setUserInfo((0,s.Z)((0,s.Z)({},t.userInfo),a[0])),t.getSchoolYearTermList(),t.getCurrentYear((0,s.Z)((0,s.Z)({},t.userInfo),a[0]).organizationId),t.$api.base.getRkClasses(t.userInfo.uid,{schoolId:a[0].organizationId}).then((function(e){e&&e.length&&t.setCourse(e)})).finally((function(){var e=t.roles.filter((function(e){return"teacher"==e.roleKey}))[0].roleId;t.changeAppType(e),t.setAppType(2),uni.reLaunch({url:"/pages/index/index"})}))}));else{var r=a.filter((function(e){return 1==e.isDefault}));r&&r.length>0?(this.setUserInfo((0,s.Z)((0,s.Z)({},this.userInfo),r[0])),this.getSchoolYearTermList(),this.getCurrentYear((0,s.Z)((0,s.Z)({},this.userInfo),r[0]).organizationId),this.selOrgan(r[0])):(this.setUserInfo((0,s.Z)((0,s.Z)({},this.userInfo),a[0])),this.getSchoolYearTermList(),this.getCurrentYear((0,s.Z)((0,s.Z)({},this.userInfo),a[0]).organizationId),this.organList=a.map((function(e){return(0,s.Z)((0,s.Z)({},e),{},{name:e.organizationName,value:e.organizationId})})),this.showSel=!0)}}3==e&&(this.setAppType(3),this.getSchoolYearTermList(),this.getCurrentYear(this.userInfo.organizationId).then((function(e){uni.reLaunch({url:"/pages/index/index"})})))}})},c=d,h=(i(22379),i(77938),i(69453)),p=(0,h.Z)(c,r,o,!1,null,"66c1c8ac",null,!1,a,n),g=p.exports},65430:function(e,t,i){"use strict";i.d(t,{Z:function(){return h}});var n,a={uLine:i(49573).Z},r=function(){var e=this,t=e.$createElement,i=e._self._c||t;return i("v-uni-view",{staticClass:"u-cell-group",class:[e.customClass],style:[e.$u.addStyle(e.customStyle)]},[e.title?i("v-uni-view",{staticClass:"u-cell-group__title"},[e._t("title",[i("v-uni-text",{staticClass:"u-cell-group__title__text"},[e._v(e._s(e.title))])])],2):e._e(),i("v-uni-view",{staticClass:"u-cell-group__wrapper"},[e.border?i("u-line"):e._e(),e._t("default")],2)],1)},o=[],s={props:{title:{type:String,default:uni.$u.props.cellGroup.title},border:{type:Boolean,default:uni.$u.props.cellGroup.border}}},u={name:"u-cell-group",mixins:[uni.$u.mpMixin,uni.$u.mixin,s]},l=u,d=(i(59468),i(69453)),c=(0,d.Z)(l,r,o,!1,null,"c496bc48",null,!1,a,n),h=c.exports},20641:function(e,t,i){"use strict";i.d(t,{Z:function(){return h}});var n,a={uTransition:i(84843).Z,uIcon:i(28317).Z},r=function(){var e=this,t=e.$createElement,i=e._self._c||t;return i("u-transition",{attrs:{mode:"fade",show:e.show,duration:e.fade?1e3:0}},[i("v-uni-view",{staticClass:"u-image",style:[e.wrapStyle,e.backgroundStyle],on:{click:function(t){arguments[0]=t=e.$handleEvent(t),e.onClick.apply(void 0,arguments)}}},[e.isError?e._e():i("v-uni-image",{staticClass:"u-image__image",style:{borderRadius:"circle"==e.shape?"10000px":e.$u.addUnit(e.radius),width:e.$u.addUnit(e.width),height:e.$u.addUnit(e.height)},attrs:{src:e.src,mode:e.mode,"show-menu-by-longpress":e.showMenuByLongpress,"lazy-load":e.lazyLoad},on:{error:function(t){arguments[0]=t=e.$handleEvent(t),e.onErrorHandler.apply(void 0,arguments)},load:function(t){arguments[0]=t=e.$handleEvent(t),e.onLoadHandler.apply(void 0,arguments)}}}),e.showLoading&&e.loading?i("v-uni-view",{staticClass:"u-image__loading",style:{borderRadius:"circle"==e.shape?"50%":e.$u.addUnit(e.radius),backgroundColor:this.bgColor,width:e.$u.addUnit(e.width),height:e.$u.addUnit(e.height)}},[e._t("loading",[i("u-icon",{attrs:{name:e.loadingIcon,width:e.width,height:e.height}})])],2):e._e(),e.showError&&e.isError&&!e.loading?i("v-uni-view",{staticClass:"u-image__error",style:{borderRadius:"circle"==e.shape?"50%":e.$u.addUnit(e.radius),width:e.$u.addUnit(e.width),height:e.$u.addUnit(e.height)}},[e._t("error",[i("u-icon",{attrs:{name:e.errorIcon,width:e.width,height:e.height}})])],2):e._e()],1)],1)},o=[],s=i(37100),u={name:"u-image",mixins:[uni.$u.mpMixin,uni.$u.mixin,s.Z],data:function(){return{isError:!1,loading:!0,opacity:1,durationTime:this.duration,backgroundStyle:{},show:!1}},watch:{src:{immediate:!0,handler:function(e){e?(this.isError=!1,this.loading=!0):this.isError=!0}}},computed:{wrapStyle:function(){var e={};return e.width=this.$u.addUnit(this.width),e.height=this.$u.addUnit(this.height),e.borderRadius="circle"==this.shape?"10000px":uni.$u.addUnit(this.radius),e.overflow=this.borderRadius>0?"hidden":"visible",uni.$u.deepMerge(e,uni.$u.addStyle(this.customStyle))}},mounted:function(){this.show=!0},methods:{onClick:function(){this.$emit("click")},onErrorHandler:function(e){this.loading=!1,this.isError=!0,this.$emit("error",e)},onLoadHandler:function(e){this.loading=!1,this.isError=!1,this.$emit("load",e),this.removeBgColor()},removeBgColor:function(){this.backgroundStyle={backgroundColor:"transparent"}}}},l=u,d=(i(71591),i(69453)),c=(0,d.Z)(l,r,o,!1,null,"1428a719",null,!1,a,n),h=c.exports},37100:function(e,t,i){"use strict";i(79288);t.Z={props:{src:{type:String,default:uni.$u.props.image.src},mode:{type:String,default:uni.$u.props.image.mode},width:{type:[String,Number],default:uni.$u.props.image.width},height:{type:[String,Number],default:uni.$u.props.image.height},shape:{type:String,default:uni.$u.props.image.shape},radius:{type:[String,Number],default:uni.$u.props.image.radius},lazyLoad:{type:Boolean,default:uni.$u.props.image.lazyLoad},showMenuByLongpress:{type:Boolean,default:uni.$u.props.image.showMenuByLongpress},loadingIcon:{type:String,default:uni.$u.props.image.loadingIcon},errorIcon:{type:String,default:uni.$u.props.image.errorIcon},showLoading:{type:Boolean,default:uni.$u.props.image.showLoading},showError:{type:Boolean,default:uni.$u.props.image.showError},fade:{type:Boolean,default:uni.$u.props.image.fade},webp:{type:Boolean,default:uni.$u.props.image.webp},duration:{type:[String,Number],default:uni.$u.props.image.duration},bgColor:{type:String,default:uni.$u.props.image.bgColor}}}},11408:function(e,t,i){"use strict";i.r(t);var n=i(8081),a=i.n(n),r=i(23645),o=i.n(r),s=o()(a());s.push([e.id,'@charset "UTF-8";\n/* uview 颜色变量 */.bindStudent-page .u-form[data-v-66c1c8ac]{width:%?550?%}.bindStudent-page .u-form .u-border-bottom[data-v-66c1c8ac]{border-bottom-width:%?2?%!important;border-color:#d4dbdf!important;border-bottom-style:solid}',""]),t["default"]=s},8130:function(e,t,i){"use strict";i.r(t);var n=i(8081),a=i.n(n),r=i(23645),o=i.n(r),s=o()(a());s.push([e.id,'@charset "UTF-8";\n/* uview 颜色变量 */.bindStudent-page .content[data-v-66c1c8ac]{display:flex;justify-content:center;align-items:center;padding-top:%?1?%;width:%?750?%;height:100vh;background:linear-gradient(0deg,#fff,#ceebff 46%,#b1defa 98%)}.bindStudent-page .content .title[data-v-66c1c8ac]{margin-bottom:%?90?%;font-size:%?42?%;font-family:PingFang SC;font-weight:600;color:#00a5f3;text-align:center}.bindStudent-page .content .item[data-v-66c1c8ac]{height:%?120?%;background-color:#e9f4fe;border-radius:%?20?%;position:relative;margin-top:%?40?%;padding-left:%?240?%;margin-bottom:%?20?%}.bindStudent-page .content .item .icon[data-v-66c1c8ac]{position:absolute;width:%?130?%;height:%?130?%;bottom:0;left:%?50?%}.bindStudent-page .content .item .name[data-v-66c1c8ac]{line-height:%?120?%}.bindStudent-page .card[data-v-66c1c8ac]{background:#fff;box-shadow:0 %?1?% %?25?% %?2?% rgba(18,42,105,.06);border-radius:%?16?%;margin-bottom:%?20?%;width:90%}.bindStudent-page .card .card-content[data-v-66c1c8ac]{padding:%?10?%}.bindStudent-page .card .card-head[data-v-66c1c8ac]{padding:%?20?% %?20?% %?10?%}.bindStudent-page .card .card-head .card-title[data-v-66c1c8ac]{font-size:%?28?%;color:#404040;font-weight:700;border-left:%?8?% #3aa2e8 solid;line-height:%?28?%;padding-left:%?10?%}',""]),t["default"]=s},7670:function(e,t,i){"use strict";i.r(t);var n=i(8081),a=i.n(n),r=i(23645),o=i.n(r),s=o()(a());s.push([e.id,'@charset "UTF-8";\n/* uview 颜色变量 */uni-view[data-v-c496bc48], uni-scroll-view[data-v-c496bc48], uni-swiper-item[data-v-c496bc48]{display:flex;flex-direction:column;flex-shrink:0;flex-grow:0;flex-basis:auto;align-items:stretch;align-content:flex-start}.u-cell-group[data-v-c496bc48]{flex:1}.u-cell-group__title[data-v-c496bc48]{padding:16px 16px 8px}.u-cell-group__title__text[data-v-c496bc48]{font-size:15px;line-height:16px;color:#303133}.u-cell-group__wrapper[data-v-c496bc48]{position:relative}',""]),t["default"]=s},91845:function(e,t,i){"use strict";i.r(t);var n=i(8081),a=i.n(n),r=i(23645),o=i.n(r),s=o()(a());s.push([e.id,'@charset "UTF-8";\n/* uview 颜色变量 */uni-view[data-v-1428a719], uni-scroll-view[data-v-1428a719], uni-swiper-item[data-v-1428a719]{display:flex;flex-direction:column;flex-shrink:0;flex-grow:0;flex-basis:auto;align-items:stretch;align-content:flex-start}.u-image[data-v-1428a719]{position:relative;transition:opacity .5s ease-in-out}.u-image__image[data-v-1428a719]{width:100%;height:100%}.u-image__loading[data-v-1428a719], .u-image__error[data-v-1428a719]{position:absolute;top:0;left:0;width:100%;height:100%;display:flex;flex-direction:row;align-items:center;justify-content:center;background-color:#f3f4f6;color:#909193;font-size:%?46?%}',""]),t["default"]=s}}]);