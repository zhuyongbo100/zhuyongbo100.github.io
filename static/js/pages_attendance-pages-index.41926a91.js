(self["webpackChunkproject_v2"]=self["webpackChunkproject_v2"]||[]).push([[7059],{94450:function(t,e,a){var n=a(51809);n.__esModule&&(n=n.default),"string"===typeof n&&(n=[[t.id,n,""]]),n.locals&&(t.exports=n.locals);var i=a(56).Z;i("608e8636",n,!0,{sourceMap:!1,shadowMode:!1})},28895:function(t,e,a){var n=a(42633);n.__esModule&&(n=n.default),"string"===typeof n&&(n=[[t.id,n,""]]),n.locals&&(t.exports=n.locals);var i=a(56).Z;i("2baf1401",n,!0,{sourceMap:!1,shadowMode:!1})},59358:function(t,e,a){var n=a(2409);n.__esModule&&(n=n.default),"string"===typeof n&&(n=[[t.id,n,""]]),n.locals&&(t.exports=n.locals);var i=a(56).Z;i("e3d584b4",n,!0,{sourceMap:!1,shadowMode:!1})},65791:function(t,e,a){var n=a(82602);n.__esModule&&(n=n.default),"string"===typeof n&&(n=[[t.id,n,""]]),n.locals&&(t.exports=n.locals);var i=a(56).Z;i("68e8d302",n,!0,{sourceMap:!1,shadowMode:!1})},52173:function(t,e,a){"use strict";a.r(e),a.d(e,{default:function(){return _}});var n={mescrollBody:a(40398).Z,uAvatar:a(49210).Z,uSteps:a(73925).Z,uStepsItem:a(74714).Z,uTag:a(71509).Z,uIcon:a(28317).Z,uText:a(7661).Z,uEmpty:a(8405).Z,uTabbar:a(58511).Z,uTabbarItem:a(95848).Z,uModal:a(53868).Z,uToast:a(59916).Z,uLoadingPage:a(69836).Z},i=function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("v-uni-view",{staticClass:"wrap"},[a("mescroll-body",{ref:"mescrollRef",attrs:{bottom:"40rpx",down:t.downOption,up:t.upOption},on:{init:function(e){arguments[0]=e=t.$handleEvent(e),t.mescrollInit.apply(void 0,arguments)},down:function(e){arguments[0]=e=t.$handleEvent(e),t.downCallback.apply(void 0,arguments)}}},[a("v-uni-view",{staticClass:"enter"},[a("v-uni-view",{staticClass:"head"},[a("v-uni-view",{staticClass:"head-img"},[t.userInfo.avatar?a("u-avatar",{attrs:{size:"50",src:t.userInfo.avatar}}):a("v-uni-image",{attrs:{src:t.$base.staticUrl+"/image/head-teacher.png",mode:"aspectFit"}}),a("v-uni-view",{staticClass:"head-text"},[a("span",[t._v(t._s(t.userInfo.userName))]),a("span",[t._v(t._s(t.userInfo.organizationName||""))])])],1),a("v-uni-view",{staticClass:"head-date"},[a("v-uni-text",[t._v(t._s(t.time))]),a("v-uni-text",{staticClass:"day"},[t._v(t._s(t.day))])],1)],1)],1),a("v-uni-view",{staticClass:"container"},[t.ruleObj&&t.ruleObj.kaRuleTimes?[a("v-uni-view",{staticClass:"title"},[a("v-uni-text",[t._v("考勤时间")]),a("v-uni-view",[t._v("("),t.ruleObj&&t.ruleObj.kaRuleTimes?a("v-uni-text",{staticClass:"item"},[t._v(t._s(t.ruleObj.kaRuleTimes.map((function(t){return t.checkTimeStart+"-"+t.checkTimeEnd})).join(",")))]):t._e(),t._v(")")],1)],1),a("v-uni-view",{staticClass:"steps"},[3==t.status?a("v-uni-view",{staticStyle:{"font-size":"12px","text-align":"center","padding-bottom":"20rpx",color:"#8E8585"}},[t._v("今日休息,无需打卡")]):t._e(),a("u-steps",{attrs:{current:t.currentIndex,direction:"column",dot:!0}},t._l(t.kaRuleTimes,(function(e,n){return a("u-steps-item",{key:n+"_d"+t.currentIndex,attrs:{title:e.name}},[a("template",{slot:"desc"},[e.record?a("v-uni-view",{staticClass:"step-item"},[a("v-uni-view",{staticClass:"status"},[e.record.checkTime?a("v-uni-text",{staticClass:"time"},[t._v(t._s(e.record.checkTime.slice(0,5))+" 打卡")]):t._e(),t.bpmProcessInstanceExtVos&&t.bpmProcessInstanceExtVos.length&&t.isApply(t.bpmProcessInstanceExtVos[0],e)?[a("u-tag",{key:"klkk",attrs:{size:"mini",text:"teacher_leave"==t.bpmProcessInstanceExtVos[0].category?"请假":"teacher_away"==t.bpmProcessInstanceExtVos[0].category?"公出":"正常",plain:!0}})]:[a("u-tag",{attrs:{text:t.statusTag[parseInt(e.record.status)-1],type:["primary","error","warning","warning","warning","primary","primary","warning"][parseInt(e.record.status)-1],plain:!0,size:"mini"}},[t._v(t._s(e.record.status))])]],2),a("v-uni-view",{staticClass:"address"},[a("u-icon",{attrs:{name:"map",size:"14"}}),t._v(t._s(e.record.location||"无地址信息"))],1),a("v-uni-view",{staticClass:"btn"},[5===e.record.status||(1===e.record.status||6===e.record.status||7===e.record.status)&&1==e.type||4===e.record.status?a("u-text",{attrs:{type:"primary",text:"更新打卡",size:"14"},on:{click:function(a){arguments[0]=a=t.$handleEvent(a),t.updateClock(e)}}}):t._e()],1)],1):a("v-uni-view",{staticClass:"step-desc",class:["type_"+t.status]},[t.currentIndex===n?[1===t.status||2===t.status||3===t.status?[a("v-uni-view",{staticClass:"step-ball",on:{click:function(a){arguments[0]=a=t.$handleEvent(a),t.handleClock(e)}}},[a("v-uni-view",[a("v-uni-view",{staticClass:"time"},[t._v(t._s(t.timeNow))]),a("v-uni-view",{staticClass:"name"},[t._v(t._s([(0==e.type?"上班":"下班")+"打卡","外勤打卡","无需打卡"][t.status-1]))])],1)],1),1===t.status||2===t.status||3===t.status?a("v-uni-view",{staticClass:"step-value"},[a("u-icon",{attrs:{name:"map",size:"14"}}),a("v-uni-text",{staticClass:"address"},[t._v(t._s(t.address))]),3!==t.status?a("v-uni-text",{staticClass:"status"},[t._v(t._s(["已在范围","不在范围","无需打卡","点击开启"][t.status-1]))]):[t.isPoIn?a("v-uni-text",{staticClass:"status",staticStyle:{color:"#1984FC"}},[t._v("已在范围")]):a("v-uni-text",{staticClass:"status"},[t._v("不在范围")])]],2):t._e(),2===t.status||!1===t.isPoIn?a("v-uni-view",{staticClass:"retry_po"},[a("u-text",{attrs:{type:"primary",size:"12",text:"重新定位"},on:{click:function(e){arguments[0]=e=t.$handleEvent(e),t.resetPost.apply(void 0,arguments)}}})],1):t._e()]:[a("v-uni-view",{staticClass:"step-ball"},[a("u-icon",{attrs:{name:"map",color:"#CECECE",size:"80"}})],1),a("v-uni-view",{staticClass:"step-value"},[a("v-uni-text",{staticClass:"address"},[t._v("定位权限未开启")]),a("v-uni-text",{staticClass:"status opera",on:{click:function(e){arguments[0]=e=t.$handleEvent(e),t.getLocationAndAddress.apply(void 0,arguments)}}},[t._v("点击开启")])],1),2===t.status?a("v-uni-view",{staticClass:"retry_po"},[a("u-text",{attrs:{type:"primary",size:"12",text:"重新定位"},on:{click:function(e){arguments[0]=e=t.$handleEvent(e),t.getLocationAndAddress.apply(void 0,arguments)}}})],1):t._e()]]:t._e()],2)],1)],2)})),1)],1),t.bpmProcessInstanceExtVos&&t.bpmProcessInstanceExtVos.length?a("v-uni-view",{staticClass:"apply-list"},t._l(t.bpmProcessInstanceExtVos,(function(e,n){return a("v-uni-view",{key:n,staticClass:"apply-item",on:{click:function(a){arguments[0]=a=t.$handleEvent(a),t.gotoDetail(e)}}},[a("v-uni-view",{staticClass:"title"},[a("u-tag",{attrs:{type:"primary",text:e.approvalLabel||e.categoryName,plain:!0,size:"mini"}}),a("v-uni-text",{staticClass:"desc"},[t._v("时长"+t._s(0===e.leaveType?e.leaveTimes+"天":e.leaveTimes+"节"))])],1),a("v-uni-view",{staticClass:"date"},[t._v(t._s(t.parseTime(e.startTime))+"~"+t._s(t.parseTime(e.endTime)))]),a("u-icon",{attrs:{name:"arrow-right",size:"14"}})],1)})),1):t._e()]:a("v-uni-view",{staticClass:"no_data"},[a("u-empty",{attrs:{mode:"page",text:"该用户暂无考勤规则"}})],1)],2),a("u-tabbar",{attrs:{value:t.tabName,fixed:!0,placeholder:!0,border:!0,safeAreaInsetBottom:!1,customStyle:{paddingBottom:"15px"}},on:{change:function(e){arguments[0]=e=t.$handleEvent(e),t.changeTab.apply(void 0,arguments)}}},[a("u-tabbar-item",{attrs:{text:"考勤打卡",icon:"clock",name:"clock"}}),a("u-tabbar-item",{attrs:{text:"签到日历",icon:"calendar",name:"calendar"}})],1)],1),a("u-modal",{attrs:{width:"480rpx",showCancelButton:!0,show:t.showModal,title:"提示",content:t.contentModal},on:{cancel:function(e){arguments[0]=e=t.$handleEvent(e),t.showModal=!1},confirm:function(e){arguments[0]=e=t.$handleEvent(e),t.confirm.apply(void 0,arguments)}}}),a("u-toast",{ref:"uToast"}),a("u-loading-page",{attrs:{"loading-mode":"spinner",loading:t.loading}})],1)},o=[],s=a(66407),r=a(4587),c=a(41541),u=a(89441),l=(a(79288),a(50886),a(64043),a(9873),a(95765),a(97195),a(34338),a(70560),a(38077),a(60228),a(65137),a(32320),a(90761)),d=a(80843),p=a(4626),g=a(22148),f=a(81980)["Z"];function m(t,e,a,n){var i=6378.137,o=t*Math.PI/180,s=a*Math.PI/180,r=o-s,c=e*Math.PI/180-n*Math.PI/180,u=2*Math.asin(Math.sqrt(Math.pow(Math.sin(r/2),2)+Math.cos(o)*Math.cos(s)*Math.pow(Math.sin(c/2),2)));return u*=i,u=Math.round(1e4*u)/1e4,Number(u.toFixed(4))}function h(t,e){function a(t){var e=t.split(":").map(Number),a=(0,u.Z)(e,2),n=a[0],i=a[1];return 60*n+i}var n=a(t),i=a(e);return n<i?"早":n>i?"晚":"等"}var v,x={mixins:[l.Z],data:function(){return{loading:!1,downOption:{use:!0,offset:40},upOption:{use:!1},time:"",day:"",timeNow:"",timer:null,tabName:"clock",currentIndex:0,statusTag:["正常","未打卡","迟到","外勤","早退","请假","公出"],status:4,isPoIn:!1,hasClock:!1,hasPosition:!1,centerLat:34.74821,centerLng:113.61332,radius:1,address:"",latitude:"",longitude:"",showModal:!1,contentModal:"",ruleObj:{kaRuleTimes:[]},kaRuleLocations:[],kaRuleTimes:[],weekDayTime:!0,companyName:"",ruleTimesId:"",type:"",recordInfo:{},clockStatus:1,recordId:"",updateStatus:1,updateRuleTimesId:"",bpmProcessInstanceExtVos:[]}},computed:(0,c.Z)((0,c.Z)({},(0,d.mapState)(["userInfo"])),{},{hasPublic:function(){}}),destroyed:function(){clearInterval(this.timer),this.timer=null},onShow:function(){var t=this;return(0,r.Z)((0,s.Z)().mark((function e(){var a;return(0,s.Z)().wrap((function(e){while(1)switch(e.prev=e.next){case 0:return t.getDate(),e.next=3,t.ApiGetRule();case 3:return e.next=5,t.getLocationAndAddress();case 5:a=t,t.timer=setInterval((function(t){a.timeNowFun()}),1e3);case 7:case"end":return e.stop()}}),e)})))()},methods:{isApply:function(t,e){var a=(0,p.TD)(t.startTime,"YYYY-MM-DD HH:mm"),n=(0,p.TD)(t.endTime,"YYYY-MM-DD HH:mm"),i=e.record,o=e.checkTimeEnd,s=e.checkTimeStart,r=t.leaveTimes;function c(t,e,a,n,i){function o(t){var e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"",a=t.split(/[-\s:]/).map(Number),n=(0,u.Z)(a,5),i=n[0],o=n[1],s=n[2],r=n[3],c=n[4],l=new Date(i,o-1,s,r||0,c||0,0,0);if(e){var d=e.split(":").map(Number),p=(0,u.Z)(d,2),g=p[0],f=p[1];l.setHours(g,f,0,0)}return l}var s=o(a.split(" ")[0]+" 12:00"),r=(o(a.split(" ")[0],t),o(n.split(" ")[0],e),o(a)),c=o(n),l="正常",d="正常";return Number.isInteger(i)?(l="申请",d="申请"):.5===i?r<s&&c<=s?l="申请":r>=s&&c>s&&(d="申请"):i%1===.5&&(r<s&&(l="申请"),c>s&&(d="申请")),{morningPunch:l,eveningPunch:d}}var l=c(s,o,a,n,r);return 0===i.checkType?"申请"===l.morningPunch:"申请"===l.eveningPunch},isDuringDate:function(t,e,a){"string"===typeof t&&t.indexOf("-")>-1&&(t=new Date(t).getTime()),"string"===typeof e&&e.indexOf("-")>-1&&(e=new Date(e).getTime());var n=new Date(a).getTime()||(new Date).getTime(),i=t,o=e;return n>=i&&n<=o||(n<i?"begin":"end")},gotoDetail:function(t){uni.navigateTo({url:"/pages_apply/pages/leaveApplyDetail?formId=".concat(t.formProcessId,"&id=").concat(t.id,"&status=1")})},confirm:function(){var t=this;return(0,r.Z)((0,s.Z)().mark((function e(){return(0,s.Z)().wrap((function(e){while(1)switch(e.prev=e.next){case 0:return e.next=2,t.ApiClock();case 2:t.showModal=!1;case 3:case"end":return e.stop()}}),e)})))()},computedClock:function(t){var e=this;return(0,r.Z)((0,s.Z)().mark((function a(){var n,i,o,r,c,u,l,d,g;return(0,s.Z)().wrap((function(a){while(1)switch(a.prev=a.next){case 0:if(n=t.ruleTimesId,i=t.type,o=t.row,e.ruleTimesId=n,e.type=i,e.recordInfo=o,r=1,c=(0,p.TD)(new Date,"HH:mm"),0!==i){a.next=15;break}return u=o.checkTimeStart,l=h(c,u),"晚"===l&&(r=3),e.clockStatus=r,a.next=13,e.ApiClock();case 13:a.next=27;break;case 15:if(d=o.checkTimeEnd,g=h(c,d),"早"!==g){a.next=24;break}r=5,e.clockStatus=r,e.contentModal="还未到打卡时间,是否早退?",e.showModal=!0,a.next=27;break;case 24:return e.clockStatus=r,a.next=27,e.ApiClock();case 27:case"end":return a.stop()}}),a)})))()},ApiClock:function(){var t=this;return(0,r.Z)((0,s.Z)().mark((function e(){var a;return(0,s.Z)().wrap((function(e){while(1)switch(e.prev=e.next){case 0:return a={ruleId:t.ruleObj.id,status:t.clockStatus,organizationId:t.ruleObj.organizationId,ruleTimesId:t.ruleTimesId,checkType:t.type,uid:t.userInfo.uid,userName:t.userInfo.userName,schoolId:t.userInfo.organizationId,schoolName:t.userInfo.organizationName,organId:t.userInfo.organId,organName:t.userInfo.organName,location:t.address,latitude:t.latitude,longitude:t.longitude,remark:t.remark,revCode:"0"},t.uploadList&&t.uploadList.length&&(a.fileList=t.uploadList.map((function(t){return{formType:3,fileName:t.fileName,path:t.path,wpsKey:t.wpsKey,fileType:t.fileType,fileExt:t.fileExt,fileSize:t.fileSize}}))),3===t.status&&(f.log("无需打卡时打卡"),a.revCode="1"),e.next=5,t.$api.clock.clock(a).then((function(e){uni.showToast({title:"操作成功",icon:"success"}),t.ApiGetRule()}));case 5:case"end":return e.stop()}}),e)})))()},ApiGetRule:function(){var t=this;return(0,r.Z)((0,s.Z)().mark((function e(){return(0,s.Z)().wrap((function(e){while(1)switch(e.prev=e.next){case 0:return t.loading=!0,e.next=3,t.$api.clock.getRule(t.userInfo.uid,t.userInfo.organizationId).then((function(e){if(e){t.ruleObj=e,t.kaRuleLocations=e.kaRuleLocations||[];for(var a=[],n=0;n<e.kaRuleTimes.length;n++)a.push((0,c.Z)((0,c.Z)({},e.kaRuleTimes[n]),{},{name:"上班"+e.kaRuleTimes[n].checkTimeStart,type:0})),a.push((0,c.Z)((0,c.Z)({},e.kaRuleTimes[n]),{},{name:"下班"+e.kaRuleTimes[n].checkTimeEnd,type:1}));t.kaRuleTimes=a.map((function(t,e){if(t.userRecords)if(0===t.type){var a=t.userRecords.filter((function(e){return 0===e.checkType&&t.checkTimeStart===e.ruleCheckTime}));a&&a.length?t.record=a[0]:f.log("规则时间不匹配")}else{var n=t.userRecords.filter((function(e){return 1===e.checkType&&t.checkTimeEnd===e.ruleCheckTime}));n&&n.length?t.record=n[0]:f.log("规则时间不匹配")}return t})),t.currentIndex=0;for(var i=0;i<t.kaRuleTimes.length;i++)t.kaRuleTimes[i].record&&(t.currentIndex=i+1);t.weekDayTime=e.weekDayTime,t.bpmProcessInstanceExtVos=e.bpmProcessInstanceExtVos||[]}else f.log("无打卡规则");t.loading=!1,t.mescroll.endSuccess()})).catch((function(e){t.loading=!1,t.mescroll.endErr()}));case 3:case"end":return e.stop()}}),e)})))()},getLocation:function(){var t=this;return(0,r.Z)((0,s.Z)().mark((function e(){var a;return(0,s.Z)().wrap((function(e){while(1)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,(0,g.aQ)(!1);case 3:a=e.sent,"getLocation:ok"===a.errMsg?(t.latitude=a.latitude,t.longitude=a.longitude,t.weekDayTime?t.whetherItIsInRange(a.latitude,a.longitude):(t.whetherItIsInRange(a.latitude,a.longitude),t.status=3)):t.status=4,e.next=11;break;case 7:e.prev=7,e.t0=e["catch"](0),f.log("定位权限未开启"),uni.showModal({title:"提示",content:"定位权限未开启,请在手机设置中开启定位权限",showCancel:!1});case 11:case"end":return e.stop()}}),e,null,[[0,7]])})))()},resetPost:function(){var t=this;return(0,r.Z)((0,s.Z)().mark((function e(){return(0,s.Z)().wrap((function(e){while(1)switch(e.prev=e.next){case 0:return uni.showLoading({title:"加载中..."}),e.next=3,t.getLocationAndAddress();case 3:uni.$u.sleep(800).then((function(t){uni.hideLoading()}));case 4:case"end":return e.stop()}}),e)})))()},getAddress:function(){var t=this;return(0,r.Z)((0,s.Z)().mark((function e(){var a;return(0,s.Z)().wrap((function(e){while(1)switch(e.prev=e.next){case 0:return e.next=2,t.$api.clock.getAddress({location:[t.latitude,t.longitude].join(",")});case 2:a=e.sent,t.companyName?t.address=t.companyName||a.address:t.address=a.address||"";case 4:case"end":return e.stop()}}),e)})))()},getLocationAndAddress:function(){var t=this;uni.$u.throttle((0,r.Z)((0,s.Z)().mark((function e(){return(0,s.Z)().wrap((function(e){while(1)switch(e.prev=e.next){case 0:return e.next=2,t.getLocation();case 2:return e.next=4,t.getAddress();case 4:case"end":return e.stop()}}),e)}))),1e3)},updateClock:function(t){var e=this;return(0,r.Z)((0,s.Z)().mark((function a(){var n,i,o;return(0,s.Z)().wrap((function(a){while(1)switch(a.prev=a.next){case 0:if(f.log(t),!t||!t.record){a.next=29;break}return e.updateRuleTimesId=t.id,n=1,i=(0,p.TD)(new Date,"HH:mm"),e.recordId=t.record.id,o=h(i,t.record.ruleCheckTime),a.next=9,e.getLocation();case 9:if(1!==e.status){a.next=13;break}"早"===o&&1==t.type&&(n=5),a.next=17;break;case 13:if(2!==e.status){a.next=17;break}return n=4,e.$refs.uToast.show({message:"当前位置不在考勤范围内",type:"warning"}),a.abrupt("return");case 17:if(3!==e.status){a.next=25;break}if(!e.isPoIn){a.next=22;break}"早"===o&&1==t.type&&(n=5),a.next=25;break;case 22:return n=4,e.$refs.uToast.show({message:"当前位置不在考勤范围内",type:"warning"}),a.abrupt("return");case 25:e.updateStatus=n,e.ApiUpdateRecord(),a.next=30;break;case 29:f.log("更新打卡参数获取异常");case 30:case"end":return a.stop()}}),a)})))()},ApiUpdateRecord:function(t){var e=this;this.$api.clock.updateRecord({id:this.recordId,status:this.updateStatus,ruleTimesId:this.updateRuleTimesId,location:this.address,latitude:this.latitude,longitude:this.longitude}).then((function(t){e.ApiGetRule(),uni.showToast({title:"操作成功",icon:"success"})}))},whetherItIsInRange:function(t,e){if(this.kaRuleLocations&&this.kaRuleLocations.length){for(var a=0;a<this.kaRuleLocations.length;a++){var n=this.kaRuleLocations[a],i=n.latitude,o=n.longitude,s=Math.round(n.locationDistance),r=1e3*m(i,o,t,e);if(f.log("-------------------考勤参数---------------"),f.log("考勤半径:"+n.locationDistance),f.log("考勤半径:"+s),f.log("距离考勤点:"+r),f.log("考勤中心点:"+"".concat(this.latitude,",").concat(this.longitude)),f.log("定位坐标:"+"".concat(i,",").concat(o)),f.log("-------------------end---------------"),r<=s){f.log("在考勤范围内"),this.hasPosition||(this.getAddress(),this.hasPosition=!0),this.status=1,this.isPoIn=!0,this.companyName=n.locationName;break}f.log("不在考勤范围内"),this.status=2,this.isPoIn=!1,this.companyName=null}var u=this.kaRuleLocations.map((function(a){var n=m(a.latitude,a.longitude,t,e);return(0,c.Z)({distance:n},a)})).sort((function(t,e){return t.distance>e.distance?1:-1}));this.centerLat=u[0].latitude,this.centerLng=u[0].longitude,this.radius=Math.round(u[0].locationDistance/100)/10}else f.log("考勤规则获取异常")},changeTab:function(t){"calendar"===t&&uni.reLaunch({url:"/pages_attendance/pages/calendar"})},getDate:function(){this.time=(0,p.TD)(new Date,"YYYY年MM月DD日");var t=(new Date).getDay(),e=["星期日","星期一","星期二","星期三","星期四","星期五","星期六"];this.day=e[parseInt(t)]||""},timeNowFun:function(){this.timeNow=(0,p.TD)(new Date,"HH:mm:ss")},handleClock:function(t){1===this.status?(this.ruleTimesId=t.id,this.type=t.type,this.recordInfo=t,this.computedClock({ruleTimesId:t.id,type:t.type,row:t})):2===this.status?(f.log("不在考勤范围"),uni.navigateTo({url:"/pages_attendance/pages/map?centerLat=".concat(this.centerLat,"&centerLng=").concat(this.centerLng,"&radius=").concat(this.radius,"&ruleTimesId=").concat(t.id,"&checkType=").concat(t.type,"&weekDayTime=").concat(this.weekDayTime)})):3===this.status&&(this.isPoIn?(f.log("无需打卡:在考勤范围"),this.ruleTimesId=t.id,this.type=t.type,this.recordInfo=t,this.computedClock({ruleTimesId:t.id,type:t.type,row:t})):(f.log("无需打卡:不在考勤范围"),uni.navigateTo({url:"/pages_attendance/pages/map?centerLat=".concat(this.centerLat,"&centerLng=").concat(this.centerLng,"&radius=").concat(this.radius,"&ruleTimesId=").concat(t.id,"&checkType=").concat(t.type,"&weekDayTime=").concat(this.weekDayTime)})))},downCallback:function(){this.getLocation(),this.ApiGetRule()},parseTime:p.TD}},y=x,b=(a(94450),a(69453)),w=(0,b.Z)(y,i,o,!1,null,"6da13bc0",null,!1,n,v),_=w.exports},89440:function(t,e,a){"use strict";var n;a.d(e,{Z:function(){return p}});var i,o=function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("v-uni-view",{staticClass:"u-gap",style:[t.gapStyle]})},s=[],r=(a(79288),{props:{bgColor:{type:String,default:uni.$u.props.gap.bgColor},height:{type:[String,Number],default:uni.$u.props.gap.height},marginTop:{type:[String,Number],default:uni.$u.props.gap.marginTop},marginBottom:{type:[String,Number],default:uni.$u.props.gap.marginBottom}}}),c={name:"u-gap",mixins:[uni.$u.mpMixin,uni.$u.mixin,r],computed:{gapStyle:function(){var t={backgroundColor:this.bgColor,height:uni.$u.addUnit(this.height),marginTop:uni.$u.addUnit(this.marginTop),marginBottom:uni.$u.addUnit(this.marginBottom)};return uni.$u.deepMerge(t,uni.$u.addStyle(this.customStyle))}}},u=c,l=(a(28895),a(69453)),d=(0,l.Z)(u,o,s,!1,null,"3927d88e",null,!1,n,i),p=d.exports},69836:function(t,e,a){"use strict";a.d(e,{Z:function(){return p}});var n,i={uTransition:a(84843).Z,uLoadingIcon:a(15948).Z},o=function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("u-transition",{attrs:{show:t.loading,"custom-style":{position:"fixed",top:0,left:0,right:0,bottom:0,backgroundColor:t.bgColor,display:"flex"}}},[a("v-uni-view",{staticClass:"u-loading-page"},[a("v-uni-view",{staticClass:"u-loading-page__warpper"},[a("v-uni-view",{staticClass:"u-loading-page__warpper__loading-icon"},[t.image?a("v-uni-image",{staticClass:"u-loading-page__warpper__loading-icon__img",style:{width:t.$u.addUnit(t.iconSize),height:t.$u.addUnit(t.iconSize)},attrs:{src:t.image,mode:"widthFit"}}):a("u-loading-icon",{attrs:{mode:t.loadingMode,size:t.$u.addUnit(t.iconSize),color:t.loadingColor}})],1),t._t("default",[a("v-uni-text",{staticClass:"u-loading-page__warpper__text",style:{fontSize:t.$u.addUnit(t.fontSize),color:t.color}},[t._v(t._s(t.loadingText))])])],2)],1)],1)},s=[],r=(a(79288),{props:{loadingText:{type:[String,Number],default:uni.$u.props.loadingPage.loadingText},image:{type:String,default:uni.$u.props.loadingPage.image},loadingMode:{type:String,default:uni.$u.props.loadingPage.loadingMode},loading:{type:Boolean,default:uni.$u.props.loadingPage.loading},bgColor:{type:String,default:uni.$u.props.loadingPage.bgColor},color:{type:String,default:uni.$u.props.loadingPage.color},fontSize:{type:[String,Number],default:uni.$u.props.loadingPage.fontSize},iconSize:{type:[String,Number],default:uni.$u.props.loadingPage.fontSize},loadingColor:{type:String,default:uni.$u.props.loadingPage.loadingColor}}}),c={name:"u-loading-page",mixins:[uni.$u.mpMixin,uni.$u.mixin,r],data:function(){return{}},methods:{}},u=c,l=(a(59358),a(69453)),d=(0,l.Z)(u,o,s,!1,null,"0c0d5caa",null,!1,i,n),p=d.exports},59916:function(t,e,a){"use strict";a.d(e,{Z:function(){return d}});var n,i={uOverlay:a(53269).Z,uLoadingIcon:a(15948).Z,uIcon:a(28317).Z,uGap:a(89440).Z},o=function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("v-uni-view",{staticClass:"u-toast"},[a("u-overlay",{attrs:{show:t.isShow,"custom-style":t.overlayStyle}},[a("v-uni-view",{staticClass:"u-toast__content",class:["u-type-"+t.tmpConfig.type,"loading"===t.tmpConfig.type||t.tmpConfig.loading?"u-toast__content--loading":""],style:[t.contentStyle]},["loading"===t.tmpConfig.type?a("u-loading-icon",{attrs:{mode:"circle",color:"rgb(255, 255, 255)",inactiveColor:"rgb(120, 120, 120)",size:"25"}}):"defalut"!==t.tmpConfig.type&&t.iconName?a("u-icon",{attrs:{name:t.iconName,size:"17",color:t.tmpConfig.type,customStyle:t.iconStyle}}):t._e(),"loading"===t.tmpConfig.type||t.tmpConfig.loading?a("u-gap",{attrs:{height:"12",bgColor:"transparent"}}):t._e(),a("v-uni-text",{staticClass:"u-toast__content__text",class:["u-toast__content__text--"+t.tmpConfig.type],staticStyle:{"max-width":"400rpx"}},[t._v(t._s(t.tmpConfig.message))])],1)],1)],1)},s=[],r=(a(76801),a(50886),{name:"u-toast",mixins:[uni.$u.mpMixin,uni.$u.mixin],data:function(){return{isShow:!1,timer:null,config:{message:"",type:"",duration:2e3,icon:!0,position:"center",complete:null,overlay:!1,loading:!1},tmpConfig:{}}},computed:{iconName:function(){return this.tmpConfig.icon&&"none"!=this.tmpConfig.icon&&["error","warning","success","primary"].includes(this.tmpConfig.type)?uni.$u.type2icon(this.tmpConfig.type):""},overlayStyle:function(){var t={justifyContent:"center",alignItems:"center",display:"flex",backgroundColor:"rgba(0, 0, 0, 0)"};return t},iconStyle:function(){var t={marginRight:"4px"};return t},loadingIconColor:function(){var t="rgb(255, 255, 255)";return["error","warning","success","primary"].includes(this.tmpConfig.type)&&(t=uni.$u.hexToRgb(uni.$u.color[this.tmpConfig.type])),t},contentStyle:function(){var t=uni.$u.sys().windowHeight,e={},a=0;return"top"===this.tmpConfig.position?a=.25*-t:"bottom"===this.tmpConfig.position&&(a=.25*t),e.transform="translateY(".concat(a,"px)"),e}},created:function(){var t=this;["primary","success","error","warning","default","loading"].map((function(e){t[e]=function(a){return t.show({type:e,message:a})}}))},methods:{show:function(t){var e=this;this.tmpConfig=uni.$u.deepMerge(this.config,t),this.clearTimer(),this.isShow=!0,this.timer=setTimeout((function(){e.clearTimer(),"function"===typeof e.tmpConfig.complete&&e.tmpConfig.complete()}),this.tmpConfig.duration)},hide:function(){this.clearTimer()},clearTimer:function(){this.isShow=!1,clearTimeout(this.timer),this.timer=null}},beforeDestroy:function(){this.clearTimer()}}),c=r,u=(a(65791),a(69453)),l=(0,u.Z)(c,o,s,!1,null,"58c1703b",null,!1,i,n),d=l.exports},22148:function(t,e,a){"use strict";a.d(e,{aQ:function(){return o}});a(48324),a(60228),a(4745);var n=a(69209),i=(a(91012),a(30777),a(4110)),o=(a(81980)["Z"],function(t){return new Promise((function(e,a){var o=function(t){n.Z.commit("setCurrentAddress",{latitude:t.latitude,longitude:t.longitude}),e(t)},s=function(e){a(e),t&&uni.showToast({title:e,icon:"none"})};(0,i.$0)(o,s)}))})},51809:function(t,e,a){"use strict";a.r(e);var n=a(8081),i=a.n(n),o=a(23645),s=a.n(o),r=s()(i());r.push([t.id,'@charset "UTF-8";\n/* uview 颜色变量 */[data-v-6da13bc0] .mescroll-body-content{height:100%}[data-v-6da13bc0] .u-steps-item__wrapper__dot{width:12px!important;height:12px!important}.enter[data-v-6da13bc0]{padding:%?30?% %?30?% 0;width:%?750?%;height:%?160?%;background:linear-gradient(180deg,#b1defa 23%,#fff)}.enter .head[data-v-6da13bc0]{margin-left:%?-10?%;display:flex;justify-content:space-between;align-items:center}.enter .head .head-img[data-v-6da13bc0]{display:flex;justify-content:space-between;align-items:center}.enter .head .head-img uni-image[data-v-6da13bc0]{width:%?140?%;height:%?140?%}.enter .head .head-img .head-text[data-v-6da13bc0]{display:flex;flex-direction:column;margin-left:%?20?%}.enter .head .head-img .head-text span[data-v-6da13bc0]:nth-child(1){margin-bottom:%?5?%;font-size:%?36?%;font-family:Source Han Sans CN;font-weight:600;color:#2c2c2c}.enter .head .head-img .head-text span[data-v-6da13bc0]:nth-child(2){font-size:%?24?%;font-family:Source Han Sans CN;color:#505050}.enter .head .head-teacher[data-v-6da13bc0]{display:flex;flex-direction:column;justify-content:center;align-items:flex-start;padding:%?10?% %?20?%;background:linear-gradient(90deg,#31c5ff,#3aa0e8);border-radius:%?18?%}.enter .head .head-teacher span[data-v-6da13bc0]{font-size:%?24?%;font-family:Source Han Sans CN;font-weight:500;color:#fff}.enter .head .head-date[data-v-6da13bc0]{font-size:14px}.enter .head .head-date .day[data-v-6da13bc0]{margin-left:%?14?%}.step-item[data-v-6da13bc0]{padding:%?10?% 0}.step-item .name[data-v-6da13bc0]{color:#1681fc;font-size:18px;padding-bottom:%?10?%}.step-item .status[data-v-6da13bc0]{display:flex;flex-direction:row;align-items:center;padding-bottom:%?10?%}.step-item .time[data-v-6da13bc0]{font-weight:700;font-size:15px;margin-right:%?30?%}.step-item .address[data-v-6da13bc0]{display:flex;flex-direction:row;align-items:center;font-size:14px;color:#8e8585}.container[data-v-6da13bc0]{padding-bottom:%?70?%}.container .no_data[data-v-6da13bc0]{display:flex;flex-direction:row;align-items:center;justify-content:center;height:50vh}.container .title[data-v-6da13bc0]{font-size:14px;text-align:center;background-color:#fff;padding:%?20?%}.container .title .item[data-v-6da13bc0]{margin:0 %?5?%}.container .steps[data-v-6da13bc0]{padding:%?16?% %?60?%;min-height:100%;background-color:#fff}.container .step-desc[data-v-6da13bc0]{margin-top:%?20?%;padding-bottom:%?20?%;display:flex;flex-direction:row;flex-direction:column;justify-content:center;align-items:center}.container .step-desc .retry_po[data-v-6da13bc0]{font-size:12px;margin-top:%?10?%}.container .step-desc.type_1 .step-ball[data-v-6da13bc0]{background-color:#1984fc}.container .step-desc.type_1 .status[data-v-6da13bc0]{color:#1984fc}.container .step-desc .opera[data-v-6da13bc0]{color:#1984fc}.container .step-desc.type_2 .step-ball[data-v-6da13bc0]{background-color:#ffbf6b}.container .step-desc.type_2 .status[data-v-6da13bc0]{color:#ffbf6b}.container .step-desc.type_3 .step-ball[data-v-6da13bc0]{background-color:#1984fc}.container .step-desc.type_3 .status[data-v-6da13bc0]{color:#cecece}.container .step-desc .step-ball[data-v-6da13bc0]{width:%?240?%;height:%?240?%;border-radius:50%;color:#fff;display:flex;flex-direction:row;align-items:center;justify-content:center;font-weight:700}.container .step-desc .step-ball .time[data-v-6da13bc0]{font-size:20px}.container .step-desc .step-ball .name[data-v-6da13bc0]{font-size:12px;margin-top:%?10?%;text-align:center}.container .step-desc .step-value[data-v-6da13bc0]{margin-top:%?16?%;display:flex;flex-direction:row;align-items:center;font-size:14px}.container .step-desc .step-value .address[data-v-6da13bc0]{margin-left:%?6?%}.container .step-desc .step-value .status[data-v-6da13bc0]{margin-left:%?8?%;font-size:12px}.apply-list[data-v-6da13bc0]{border-radius:%?6?%;margin-top:%?20?%;padding:%?10?% %?20?%;background-color:#fff}.apply-list .apply-item[data-v-6da13bc0]{margin:%?5?% 0;display:flex;flex-direction:row;align-items:center;justify-content:space-between}.apply-list .apply-item .title[data-v-6da13bc0]{display:flex;flex-direction:row;align-items:center;font-size:12px;padding:%?20?% 0}.apply-list .apply-item .title .desc[data-v-6da13bc0]{margin-left:%?10?%;margin-right:%?20?%}.apply-list .apply-item .date[data-v-6da13bc0]{font-size:12px}.btn[data-v-6da13bc0]{margin-top:%?10?%}',""]),e["default"]=r},42633:function(t,e,a){"use strict";a.r(e);var n=a(8081),i=a.n(n),o=a(23645),s=a.n(o),r=s()(i());r.push([t.id,'@charset "UTF-8";\n/* uview 颜色变量 */uni-view[data-v-3927d88e], uni-scroll-view[data-v-3927d88e], uni-swiper-item[data-v-3927d88e]{display:flex;flex-direction:column;flex-shrink:0;flex-grow:0;flex-basis:auto;align-items:stretch;align-content:flex-start}',""]),e["default"]=r},2409:function(t,e,a){"use strict";a.r(e);var n=a(8081),i=a.n(n),o=a(23645),s=a.n(o),r=s()(i());r.push([t.id,'@charset "UTF-8";\n/* uview 颜色变量 */uni-view[data-v-0c0d5caa], uni-scroll-view[data-v-0c0d5caa], uni-swiper-item[data-v-0c0d5caa]{display:flex;flex-direction:column;flex-shrink:0;flex-grow:0;flex-basis:auto;align-items:stretch;align-content:flex-start}.u-loading-page[data-v-0c0d5caa]{display:flex;flex-direction:column;flex:1;align-items:center;justify-content:center}.u-loading-page__warpper[data-v-0c0d5caa]{margin-top:-150px;justify-content:center;align-items:center;color:#c8c8c8;font-size:19px;display:flex;flex-direction:column}.u-loading-page__warpper__loading-icon[data-v-0c0d5caa]{margin-bottom:10px}.u-loading-page__warpper__loading-icon__img[data-v-0c0d5caa]{width:40px;height:40px}.u-loading-page__warpper__text[data-v-0c0d5caa]{font-size:19px;color:#c8c8c8}',""]),e["default"]=r},82602:function(t,e,a){"use strict";a.r(e);var n=a(8081),i=a.n(n),o=a(23645),s=a.n(o),r=s()(i());r.push([t.id,'@charset "UTF-8";\n/* uview 颜色变量 */uni-view[data-v-58c1703b], uni-scroll-view[data-v-58c1703b], uni-swiper-item[data-v-58c1703b]{display:flex;flex-direction:column;flex-shrink:0;flex-grow:0;flex-basis:auto;align-items:stretch;align-content:flex-start}.u-toast__content[data-v-58c1703b]{display:flex;flex-direction:row;padding:12px 20px;border-radius:4px;background-color:#585858;color:#fff;align-items:center;max-width:%?600?%;position:relative}.u-toast__content--loading[data-v-58c1703b]{flex-direction:column;padding:20px 20px}.u-toast__content__text[data-v-58c1703b]{color:#fff;font-size:15px;line-height:15px}.u-toast__content__text--default[data-v-58c1703b]{color:#fff}.u-toast__content__text--error[data-v-58c1703b]{color:#f56c6c}.u-toast__content__text--primary[data-v-58c1703b]{color:#3c9cff}.u-toast__content__text--success[data-v-58c1703b]{color:#5ac725}.u-toast__content__text--warning[data-v-58c1703b]{color:#f9ae3d}.u-type-primary[data-v-58c1703b]{color:#3c9cff;background-color:#ecf5ff;border-color:#d7eafe;border-width:1px}.u-type-success[data-v-58c1703b]{color:#5ac725;background-color:#dbf1e1;border-color:#bef5c8;border-width:1px}.u-type-error[data-v-58c1703b]{color:#f56c6c;background-color:#fef0f0;border-color:#fde2e2;border-width:1px}.u-type-warning[data-v-58c1703b]{color:#f9ae3d;background-color:#fdf6ec;border-color:#faecd8;border-width:1px}.u-type-default[data-v-58c1703b]{color:#fff;background-color:#585858}',""]),e["default"]=r}}]);